<section class="auth">
    <h2>@if (mode() === 'login') { Login } @else { Register } </h2>

    <form [FormGroup]="form" (ngSubmit)="submit()" novalidate>
        @if (mode() === 'register'){
            <label>
                <span>Name</span>
                <input type="text" formControlName="name" autocomplete="name" />
            </label>

            @if (form.get('name')?.touched && !form.get('name')?.value) {
                <small class="hint" role="status">Name is required for registration</small>
            }
        }

        <label>
      <span>Email</span>
      <input type="email" formControlName="email" autocomplete="email" />
    </label>
    @if (form.get('email')?.touched && form.get('email')?.invalid) {
      <small class="error" role="alert">
        @if (form.get('email')?.errors?.['required']) { Email is required. }
        @else if (form.get('email')?.errors?.['email']) { Enter a valid email. }
      </small>
    }

    <label>
      <span>Password</span>
      <input type="password" formControlName="password" autocomplete="current-password" />
    </label>
    @if (form.get('password')?.touched && form.get('password')?.invalid) {
      <small class="error" role="alert">
        @if (form.get('password')?.errors?.['required']) { Password is required. }
        @else if (form.get('password')?.errors?.['minlength']) { Minimum 6 characters. }
      </small>
    }

    @if (error()) {
      <p class="error" role="alert">{{ error() }}</p>
    }

    <button type="submit" [disabled]="loading() || form.invalid">
      @if (mode() === 'login') { Login } @else { Create account }
    </button>

    <button type="button" (click)="switchMode()">
      @if (mode() === 'login') { Need an account? Register }
      @else { Have an account? Login }
    </button>
  </form>
</section>
