<section class="starships-list">
    <h2>Starships</h2>

    @if (loading()) {
         <p aria-live="polite">Loading starships...</p>
    }
    
    @else if (error()) {
        <div class="error" role="alert" aria-live="assertive">
            <p>Ooops! {{ error() }} </p>
            <button type="button" (click)="fetchPage(1)">Retry</button>
        </div>
    }

    @else {
        
        <ul class="starships">
            @for (ship of starships(); track ship.url) {
                <li class="starship-item">
                    <a
                        class="ship-link"
                        [routerLink]="['/starships', idFromUrl(ship.url)]"
                        aria-label="View details for {{ ship.name }}"
                    >
                        <span class="duo-line">
                            <strong class="ship-name">{{ ship.name }}</strong>
                            <span class="aurebesh" aria-hidden="true">{{ship.name}} </span>
                        </span>

                        <span class="duo-line">
                            <span class="ship-model"> — {{ ship.model }}</span>
                            <span class="aurebesh" aria-hidden="true">— {{ ship.model }}</span>
                        </span>
                    </a>
                </li>
            } @empty {
                <li class="empty">No starships found.</li>
            }
        </ul>

        <div class="pager bottom">
            <button type="button" (click)="prevPage()" [disabled]="!hasPrev() || loading()">← Prev</button>
            <span>Page {{ currentPage() }}</span>
            <button type="button" (click)="nextPage()" [disabled]="!hasNext() || loading()">Next →</button>
        </div>
    }



</section>