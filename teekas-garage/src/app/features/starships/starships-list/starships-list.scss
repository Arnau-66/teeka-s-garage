/* ===================================================
   HANGAR + CARRUSEL + HOLOGRAMAS (estilo minimal “solo holo”)
   =================================================== */

/* -------- Variables -------- */
$rack-gap: .9rem;
$item-min-w: 240px;            /* ancho mínimo de cada ítem (no-card) */
$panel-max: 1100px;

/* Tamaños uniformes de holograma (mini y central) */
$holo-w: 320px;                /* ancho fijo para TODAS las imágenes del carrusel */
$holo-h: 160px;                /* alto fijo; el img se ajusta con object-fit: contain */

$stage-w: 720px;               /* ancho del holograma central */
$stage-h: 320px;

:root{
  --c-holo: 125,211,252;       /* cian */
  --grain: radial-gradient(rgba(255,255,255,.06), transparent 40%) 0 0/6px 6px,
           radial-gradient(rgba(255,255,255,.04), transparent 40%) 2px 1px/6px 6px;
}

/* -------- Estructura base -------- */
.hangar{ position:relative; min-height:100dvh; padding:2rem 0; overflow:hidden; }

.hangar__bg{
  position:absolute; inset:0; z-index:0;
  background:url('/img/garage-background.png') center/cover no-repeat;
  filter:brightness(.45) saturate(1.1);
}

.hangar__stars{
  position:absolute; inset:0; z-index:1; pointer-events:none; opacity:.25;
  background-image:
    radial-gradient(rgba(255,255,255,.8) 1px, transparent 1.5px),
    radial-gradient(rgba(255,255,255,.6) 1px, transparent 2px);
  background-size:500px 500px, 800px 800px;
  background-position:0 0, 60px 80px;
}

.hangar__panel{
  position:relative; z-index:3; max-width:$panel-max; margin:0 auto; padding:0 1rem;
  padding-bottom:26vh; /* deja hueco para el carrusel abajo */
}
.hangar__panel h2{ color:#fff; margin:0 0 .75rem; }

/* ===================================================
   HOLOGRAMA CENTRAL
   =================================================== */
.holo-stage{
  position:sticky; top:18px; z-index:6;
  display:grid; place-items:center;
  height:$stage-h; margin-bottom:1.25rem; pointer-events:none;
}

.holo-stage img{
  display:block; width:$stage-w; height:100%; object-fit:contain;
  /* Tintado + glow + “CRT vibes” */
  filter:
    grayscale(1) sepia(.35) hue-rotate(165deg) saturate(5)
    brightness(1.1) contrast(1.15)
    drop-shadow(0 0 12px rgba(var(--c-holo),.7))
    drop-shadow(0 0 28px rgba(var(--c-holo),.45));
  opacity:.95;
  mask-image: repeating-linear-gradient(to bottom, rgba(0,0,0,1) 0 2px, rgba(0,0,0,.9) 2px 3px);
  mix-blend-mode: screen;
  animation:holo-glow 2.1s ease-in-out infinite alternate;
}
.holo-stage::after{
  content:""; position:absolute; inset:0; z-index:-1; pointer-events:none;
  background: var(--grain);
  opacity:.6;
}

/* Pie de nombre central, solo aurebesh */
.holo-caption{
  margin-top:.35rem;
  font-size:1.25rem; letter-spacing:.12em; text-transform:uppercase;
  color:rgba(var(--c-holo), .95);
  text-shadow:
    0 0 8px rgba(var(--c-holo),.8),
    0 0 18px rgba(var(--c-holo),.45);
  filter:saturate(1.4);
}

/* ===================================================
   CARRUSEL (solo ítems holograma)
   =================================================== */
.carousel{
  position:sticky; bottom:16px;
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:.5rem; z-index:10;
}

.starships.rack{
  display:flex; gap:$rack-gap; overflow-x:auto; overflow-y:visible;
  padding:.25rem .5rem; scroll-snap-type:x proximity;
  list-style:none; margin:0 0 1rem; position:relative; z-index:1;
  -webkit-overflow-scrolling:touch;
}

/* Fades */
.rack-fade{
  pointer-events:none; position:absolute; top:0; bottom:0; width:60px; z-index:9;
}
.rack-fade--left { left:48px;  background: linear-gradient(90deg,  rgba(0,0,0,.24), transparent); }
.rack-fade--right{ right:48px; background: linear-gradient(270deg, rgba(0,0,0,.24), transparent); }

/* Ítem (sin tarjeta, solo contenedor para el holo) */
.ship-item{
  position:relative; min-width:$item-min-w; scroll-snap-align:start;
  display:grid; place-items:center; padding:.5rem .25rem;
  /* sin fondo/borde: todo “flota” */
  transition: transform .18s ease, filter .18s ease;
}
.ship-item:hover{ transform: translateY(-2px); }

/* Área clickable transparente que cubre el ítem */
.ship-hit{ position:absolute; inset:0; }

/* Holo por ítem: imagen + nombre aurebesh */
.ship-holo{
  position:relative; display:grid; place-items:center;
}
.ship-holo img{
  display:block;
  width:$holo-w; height:$holo-h; object-fit:contain;
  /* mismo tratamiento que el central, reducido */
  filter:
    grayscale(1) sepia(.35) hue-rotate(165deg) saturate(5)
    brightness(1.1) contrast(1.15)
    drop-shadow(0 0 8px rgba(var(--c-holo),.7))
    drop-shadow(0 0 18px rgba(var(--c-holo),.45));
  opacity:.9; mix-blend-mode:screen;
  mask-image: repeating-linear-gradient(to bottom, rgba(0,0,0,1) 0 2px, rgba(0,0,0,.86) 2px 3px);
}
.ship-holo::after{
  /* grano encima del holo */
  content:""; position:absolute; inset:0; pointer-events:none; opacity:.55;
  background: var(--grain);
}
.ship-name{
  margin-top:.35rem; font-size:1rem; letter-spacing:.12em; text-transform:uppercase;
  color:rgba(var(--c-holo), .95);
  text-align:center;
  text-shadow:
    0 0 6px rgba(var(--c-holo),.75),
    0 0 14px rgba(var(--c-holo),.4);
  filter:saturate(1.3);
}

/* Activo: un pelín más de glow */
.ship-item.is-active .ship-holo img{
  filter:
    grayscale(1) sepia(.35) hue-rotate(165deg) saturate(6)
    brightness(1.15) contrast(1.2)
    drop-shadow(0 0 10px rgba(var(--c-holo),.85))
    drop-shadow(0 0 26px rgba(var(--c-holo),.55));
  opacity:1;
}
.ship-item.is-active .ship-name{
  text-shadow:
    0 0 8px rgba(var(--c-holo),.9),
    0 0 22px rgba(var(--c-holo),.55);
}

/* Botones */
.car-btn{
  appearance:none; border:0; width:40px; height:40px; border-radius:8px;
  background:rgba(255,255,255,.9); cursor:pointer; font-size:24px; line-height:1;
  display:grid; place-items:center; z-index:11; transition:transform .15s ease;
}
.car-btn:hover{ transform:scale(1.05); }
.car-btn[disabled]{ opacity:.4; cursor:not-allowed; transform:none; }

/* A11y helpers */
.sr-only{
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;
  clip:rect(0,0,0,0);white-space:nowrap;border:0;
}

/* Animación glow */
@keyframes holo-glow{
  from{ filter: drop-shadow(0 0 8px rgba(var(--c-holo),.65)) drop-shadow(0 0 18px rgba(var(--c-holo),.35)); }
  to  { filter: drop-shadow(0 0 14px rgba(var(--c-holo),.9))  drop-shadow(0 0 28px rgba(var(--c-holo),.55)); }
}

/* Responsive */
@media (max-width: 640px){
  .holo-stage{ display:none; }     /* en móvil dejamos solo los minis */
  .hangar__panel{ padding-bottom:22vh; }
  .ship-holo img{ width: 82vw; height: 40vw; } /* mismos ratios en pantallas pequeñas */
  .ship-name{ font-size: .95rem; }
}
